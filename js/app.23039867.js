(function(){"use strict";var t={9552:function(t,e,n){var s=n(6848),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},i=[],o={data(){return{checked:!0,value:3}}},a=o,c=n(1656),l=(0,c.A)(a,r,i,!1,null,null,null),u=l.exports,d=n(6178),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("van-nav-bar",{attrs:{title:"会员登录","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"form"},[e("div",{staticClass:"form-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],staticClass:"inp",attrs:{maxlength:"11",placeholder:"请输入手机号码",type:"text"},domProps:{value:t.mobile},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}})]),e("div",{staticClass:"form-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.picCode,expression:"picCode"}],staticClass:"inp",attrs:{maxlength:"5",placeholder:"请输入图形验证码",type:"text"},domProps:{value:t.picCode},on:{input:function(e){e.target.composing||(t.picCode=e.target.value)}}}),t.picUrl?e("img",{attrs:{src:t.picUrl,alt:""},on:{click:function(e){return t.getPicCode()}}}):t._e()]),e("div",{staticClass:"form-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.msgCode,expression:"msgCode"}],staticClass:"inp",attrs:{placeholder:"请输入短信验证码",type:"text"},domProps:{value:t.msgCode},on:{input:function(e){e.target.composing||(t.msgCode=e.target.value)}}}),e("button",{on:{click:function(e){return t.getCode()}}},[t._v(" "+t._s(t.second===t.totalSecond?"获取验证码":t.second+"秒后重新发送")+" ")])])]),e("div",{staticClass:"login-btn",on:{click:function(e){return t.login()}}},[t._v("登录")])])],1)},m=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("h3",[t._v("手机号登录")]),e("p",[t._v("未注册的手机号登录后将自动注册")])])}],h=(n(4910),n(994)),v=(n(4114),n(4373));const f=v.A.create({baseURL:"http://smart-shop.itheima.net/index.php?s=/api",timeout:5e3,headers:{platform:"H5"}});f.interceptors.request.use((function(t){return h.A.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),t}),(function(t){return Promise.reject(t)})),f.interceptors.response.use((function(t){const e=t.data;return 200!==e.status?((0,h.A)(e.message),Promise.reject(e.message)):(h.A.clear(),t.data)}),(function(t){return Promise.reject(t)}));var g=f;const y=()=>g.get("/captcha/image"),_=(t,e,n)=>g.get("/captcha/sendSmsCaptcha",{form:{captchaCode:t,captchaKey:e,mobile:n}}),b=(t,e)=>g.post("/passport/login",{form:{isParty:!1,partyData:{},mobile:t,smsCode:e}});var C={name:"LoginPage",async created(){this.getPicCode()},data(){return{picCode:"",picKey:"",picUrl:"",totalSecond:60,second:60,timer:!1,mobile:"",msgCode:""}},methods:{async getPicCode(){const{data:{base64:t,key:e}}=await y();this.picUrl=t,this.picKey=e,(0,h.A)("获取图形验证码成功")},async getCode(){if(this.validFn()&&!this.timer&&this.second===this.totalSecond){const t=await _(this.picCode,this.picKey,this.mobile);console.log(t),this.$toast("短信发送成功"),this.timer=setInterval((()=>{this.second--,this.second<=0&&(clearInterval(this.timer),this.timer=null,this.second=this.totalSecond)}),1e3)}},destroyed(){clearInterval(this.timer)},validFn(){return/^1[3-9]\d{9}$/.test(this.mobile)?!!/^\w{4}$/.test(this.picCode)||(this.$toast("请输入正确的图形验证码"),!1):(this.$toast("请输入正确的手机号"),!1)},async login(){if(!this.validFn())return;if(!/^\d{6}$/.test(this.msgCode))return void this.$toast("请输入正确的短信验证码");const t=await b(this.mobile,this.msgCode);this.$store.commit("user/setUserInfo",t.data),console.log(t),this.$toast("登录成功"),this.$router.push("/")}}},A=C,x=(0,c.A)(A,p,m,!1,null,"0a9e909a",null),k=x.exports,w=function(){var t=this,e=t._self._c;return e("div",[e("router-view"),e("van-tabbar",{attrs:{route:"","active-color":"#ee0a24","inactive-color":"#000"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-tabbar-item",{attrs:{to:"/home",icon:"wap-home-o"}},[t._v("首页")]),e("van-tabbar-item",{attrs:{to:"/category",icon:"apps-o"}},[t._v("分页类")]),e("van-tabbar-item",{attrs:{to:"/cart",icon:"shopping-cart-o"}},[t._v("购物车")]),e("van-tabbar-item",{attrs:{to:"/user",icon:"user-o"}},[t._v("我的")])],1)],1)},I=[],S={name:"LayoutIndex",data(){return{active:0}}},O=S,$=(0,c.A)(O,w,I,!1,null,null,null),P=$.exports,L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("van-nav-bar",{attrs:{title:"商品搜索","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词",clearable:""},scopedSlots:t._u([{key:"action",fn:function(){return[e("div",{on:{click:function(e){return t.goSearch(t.search)}}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t.history.length>0?e("div",{staticClass:"search-history"},[e("div",{staticClass:"title"},[e("span",[t._v("最近搜索")]),e("van-icon",{attrs:{name:"delete-o",size:"16"},on:{click:t.clear}})],1),e("div",{staticClass:"list"},t._l(t.history,(function(n){return e("div",{key:n,staticClass:"list-item",on:{click:function(e){return t.goSearch(n)}}},[t._v(t._s(n))])})),0)]):t._e()],1)},j=[];const U="hm_shopping_info",N="hm_history_list",T=()=>{const t={token:"",userId:""},e=localStorage.getItem(U);return e?JSON.parse(e):t},F=t=>{localStorage.setItem(U,JSON.stringify(t))},J=()=>{const t=localStorage.getItem(N);return t?JSON.parse(t):[]},K=t=>{localStorage.setItem(N,JSON.stringify(t))};var M={name:"SearchIndex",data(){return{search:"",history:J()}},methods:{goSearch(t){const e=this.history.indexOf(t);-1!==e&&this.history.splice(e,1),this.history.unshift(t),K(this.history),this.$router.push(`/searchlist?search=${t}`)},clear(){this.history=[],K([])}}},D=M,G=(0,c.A)(D,L,j,!1,null,"37c1b2a9",null),z=G.exports,E=function(){var t=this,e=t._self._c;return e("div",[t._v("我是list")])},H=[],q={name:"ListIndex"},R=q,B=(0,c.A)(R,E,H,!1,null,null,null),Q=B.exports,V=function(){var t=this,e=t._self._c;return e("div",[t._v("我是prodetail")])},W=[],X={name:"ProDetailIndex"},Y=X,Z=(0,c.A)(Y,V,W,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t._self._c;return e("div",[t._v("我是pay")])},nt=[],st={name:"PayIndex"},rt=st,it=(0,c.A)(rt,et,nt,!1,null,null,null),ot=it.exports,at=function(){var t=this,e=t._self._c;return e("div",[t._v("我是myorder")])},ct=[],lt={name:"MyOrderIndex"},ut=lt,dt=(0,c.A)(ut,at,ct,!1,null,null,null),pt=dt.exports,mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("van-nav-bar",{attrs:{title:"智慧商城",fixed:""}}),e("van-search",{attrs:{readonly:"",shape:"round",background:"#f1f1f2",placeholder:"请在此输入搜索关键词"},on:{click:function(e){return t.$router.push("/search")}}}),e("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.bannerList,(function(t){return e("van-swipe-item",{key:t.imgUrl},[e("img",{attrs:{src:t.imgUrl,alt:""}})])})),1),e("van-grid",{attrs:{"column-num":"5","icon-size":"40"}},t._l(t.navList,(function(n){return e("van-grid-item",{key:n.imgUrl,attrs:{icon:n.imgUrl,text:"新品首发"},on:{click:function(e){return t.$router.push("/category")}}})})),1),t._m(0),e("div",{staticClass:"guess"},[e("p",{staticClass:"guess-title"},[t._v("—— 猜你喜欢 ——")]),e("div",{staticClass:"goods-list"},t._l(t.proList,(function(t){return e("GoodsItem",{key:t.goods_id,attrs:{item:t}})})),1)])],1)},ht=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("img",{attrs:{src:n(8823),alt:""}})])}];const vt=()=>g.get("/page/detail",{params:{pageId:0}});var ft=function(){var t=this,e=t._self._c;return t.item.goods_id?e("div",{staticClass:"goods-item",on:{click:function(e){return t.$router.push(`/prodetail/${t.item.goods_id}`)}}},[e("div",{staticClass:"left"},[e("img",{attrs:{src:t.item.goods_image,alt:""}})]),e("div",{staticClass:"right"},[e("p",{staticClass:"tit text-ellipsis-2"},[t._v(" "+t._s(t.item.goods_name)+" ")]),e("p",{staticClass:"count"},[t._v("已售"+t._s(t.item.goods_sales)+"件")]),e("p",{staticClass:"price"},[e("span",{staticClass:"new"},[t._v("¥"+t._s(t.item.goods_price_min))]),e("span",{staticClass:"old"},[t._v("¥"+t._s(t.item.goods_price_max))])])])]):t._e()},gt=[],yt={name:"GoodsItem",props:{item:{type:Object,default:()=>({})}}},_t=yt,bt=(0,c.A)(_t,ft,gt,!1,null,"b7568a4a",null),Ct=bt.exports,At={name:"HomePage",data(){return{bannerList:[],navList:[],proList:[]}},async created(){const{data:{pageData:t}}=await vt();this.bannerList=t.items[1].data,this.navList=t.items[3].data,this.proList=t.items[6].data},components:{GoodsItem:Ct}},xt=At,kt=(0,c.A)(xt,mt,ht,!1,null,"7bdcc4ed",null),wt=kt.exports,It=function(){var t=this,e=t._self._c;return e("div",[t._v("user")])},St=[],Ot={name:"UserIndex"},$t=Ot,Pt=(0,c.A)($t,It,St,!1,null,null,null),Lt=Pt.exports,jt=function(){var t=this,e=t._self._c;return e("div",[t._v("购物车")])},Ut=[],Nt={name:"CartIndex"},Tt=Nt,Ft=(0,c.A)(Tt,jt,Ut,!1,null,null,null),Jt=Ft.exports,Kt=function(){var t=this,e=t._self._c;return e("div",[t._v("category")])},Mt=[],Dt={name:"CategoryIndex"},Gt=Dt,zt=(0,c.A)(Gt,Kt,Mt,!1,null,null,null),Et=zt.exports,Ht=n(3518),qt={namespaced:!0,state(){return{userInfo:T()}},getters:{},mutations:{setUserInfo(t,e){t.userInfo=e,F(e)}},actions:{}};s.Ay.use(Ht.Ay);var Rt=new Ht.Ay.Store({state:{},getters:{token(t){return t.user.userInfo.token}},mutations:{},actions:{},modules:{user:qt}});s.Ay.use(d.Ay);const Bt=new d.Ay({routes:[{path:"/login",component:k},{path:"/",component:P,redirect:"/home",children:[{path:"/home",component:wt},{path:"/user",component:Lt},{path:"/category",component:Et},{path:"/cart",component:Jt}]},{path:"/search",component:z},{path:"/searchlist",component:Q},{path:"/prodetail/:id",component:tt},{path:"/pay",component:ot},{path:"/myorder",component:pt}]}),Qt=["/pay","/myorder"];Bt.beforeEach(((t,e,n)=>{if(!Qt.includes(t.path))return void n();const s=Rt.getters.token;console.log(s),s?n():n("/login")}));var Vt=Bt,Wt=(n(3212),n(6874)),Xt=(n(9851),n(1431)),Yt=(n(7057),n(6749)),Zt=(n(79),n(756)),te=(n(4537),n(8541)),ee=(n(9125),n(2665)),ne=(n(9809),n(4365)),se=(n(2223),n(7555)),re=(n(9831),n(5324)),ie=(n(3425),n(6141)),oe=(n(7231),n(1755)),ae=(n(4510),n(1864));s.Ay.use(h.A),s.Ay.use(ae.A),s.Ay.use(oe.A),s.Ay.use(ie.A),s.Ay.use(re.A),s.Ay.use(se.A),s.Ay.use(ne.A),s.Ay.use(ee.A),s.Ay.use(te.A),s.Ay.use(Zt.A),s.Ay.use(Yt.A),s.Ay.use(Xt.A),s.Ay.use(Wt.A),s.Ay.config.productionTip=!1,new s.Ay({router:Vt,store:Rt,render:t=>t(u)}).$mount("#app")},8823:function(t,e,n){t.exports=n.p+"img/main.95d4fe07.png"}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,s,r,i){if(!s){var o=1/0;for(u=0;u<t.length;u++){s=t[u][0],r=t[u][1],i=t[u][2];for(var a=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((function(t){return n.O[t](s[c])}))?s.splice(c--,1):(a=!1,i<o&&(o=i));if(a){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,r,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p=""}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,i,o=s[0],a=s[1],c=s[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(c)var u=c(n)}for(e&&e(s);l<o.length;l++)i=o[l],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},s=self["webpackChunkstore1"]=self["webpackChunkstore1"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(9552)}));s=n.O(s)})();
//# sourceMappingURL=app.23039867.js.map